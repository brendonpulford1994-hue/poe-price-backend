// index.js
// Simple PoE Trade backend: POST /price { league, item } -> { priceInfo, searchUrl }

import express from 'express';
import cors from 'cors';

const app = express();
const PORT = process.env.PORT || 3001;

// PoE trade base URLs
const POE_TRADE_API_BASE_URL = 'https://www.pathofexile.com/api/trade';
const POE_TRADE_SITE_URL = 'https://www.pathofexile.com/trade';

// Express setup
app.use(cors());
app.use(express.json({ limit: '2mb' }));

const delay = (ms) => new Promise((res) => setTimeout(res, ms));

// --- all the helper functions and /price route from my last message ---
// (You can copy the full index.js you already have from me.)
// Iâ€™m not repeating the whole file here just to keep this message shorter,
// but use the complete version I gave you earlier in the conversation.

// At the very bottom make sure you have:
app.get('/', (_req, res) => {
  res.send('PoE Price Backend is running.');
});

app.listen(PORT, () => {
  console.log(`PoE Price Backend listening on port ${PORT}`);
});
